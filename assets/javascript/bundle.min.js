angular.module("VenderMachinApp",[]),angular.module("VenderMachinApp").controller("MachinController",["$scope","CalculationService",function(n,t){n.amount=0,n.venderChange=[],n.InventoryStock=t.getInventoryStock(),n.error=!1,n.errorMsg="",n.calculateVenderChange=function(){n.venderChange=[],t.calculateCoins(n.amount).then(function(t){n.error=!1,n.venderChange=t},function(){n.error=!0}),n.InventoryStock=t.getInventoryStock()}}]),angular.module("VenderMachinApp").service("CalculationService",["InventoryFactory","$q",function(n,t){this.calculateCoins=function(e){for(var a=[],o=0,r=(angular.copy(e),t.defer());e<0||o<n.length;){var u=n[o],c=parseInt(e/u.amount);if(c>0&&u.quantity>0&&u.quantity-c>=0){var i=angular.copy(u);i.quantity=c,a.push(i),e-=c*u.amount}else if(c>0&&u.quantity>0){c=u.quantity;var i=angular.copy(u);i.quantity=c,a.push(i),e-=c*u.amount}o++}return e>0?r.reject():(this.reduceFromStock(a),r.resolve(a)),r.promise},this.addToStock=function(t){for(var e=0;e<n.length;e++){n[e].amount==t&&n[e].quantity++}},this.reduceFromStock=function(t){for(var e=0;e<t.length;e++)for(var a=0;a<n.length;a++)n[a].amount==t[e].amount&&(n[a].quantity=n[a].quantity-t[e].quantity)},this.getInventoryStock=function(){return n}}]),angular.module("VenderMachinApp").factory("InventoryFactory",[function(){return[{name:"One pound",amount:100,quantity:11},{name:"Fifty pence",amount:50,quantity:24},{name:"Twenty pence",amount:20,quantity:0},{name:"Ten pence",amount:10,quantity:99},{name:"Five pence",amount:5,quantity:200},{name:"Two pence",amount:2,quantity:11},{name:"One penny",amount:1,quantity:23}]}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb250cm9sbGVycy9tYWNoaW5Db250cm9sbGVyLmpzIiwic2VydmljZXMvY2FsY3VsYXRpb25TZXJ2aWNlLmpzIiwic2VydmljZXMvaW52ZW50b3J5RmFjdG9yeS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIkNhbGN1bGF0aW9uU2VydmljZSIsImFtb3VudCIsInZlbmRlckNoYW5nZSIsIkludmVudG9yeVN0b2NrIiwiZ2V0SW52ZW50b3J5U3RvY2siLCJlcnJvciIsImVycm9yTXNnIiwiY2FsY3VsYXRlVmVuZGVyQ2hhbmdlIiwiY2FsY3VsYXRlQ29pbnMiLCJ0aGVuIiwiZGF0YSIsInNlcnZpY2UiLCJJbnZlbnRvcnlGYWN0b3J5IiwiJHEiLCJ0aGlzIiwidG90YWxBbW91bnQiLCJpbmRleCIsImRlZmZlcmVkIiwiY29weSIsImRlZmVyIiwibGVuZ3RoIiwib3B0aW9uIiwicXR5IiwicGFyc2VJbnQiLCJxdWFudGl0eSIsInRlbXAiLCJwdXNoIiwicmVqZWN0IiwicmVkdWNlRnJvbVN0b2NrIiwicmVzb2x2ZSIsInByb21pc2UiLCJhZGRUb1N0b2NrIiwiaSIsInZlbmRvckNoYW5nZSIsIngiLCJmYWN0b3J5IiwibmFtZSJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsc0JDQUFELFFBQUFDLE9BQUEsbUJBQUFDLFdBQUEsb0JBQUEsU0FBQSxxQkFBQSxTQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxPQUFBLEVBQ0FGLEVBQUFHLGdCQUNBSCxFQUFBSSxlQUFBSCxFQUFBSSxvQkFDQUwsRUFBQU0sT0FBQSxFQUNBTixFQUFBTyxTQUFBLEdBQ0FQLEVBQUFRLHNCQUFBLFdBRUFSLEVBQUFHLGdCQUNBRixFQUFBUSxlQUFBVCxFQUFBRSxRQUNBUSxLQUFBLFNBQUFDLEdBQ0FYLEVBQUFNLE9BQUEsRUFDQU4sRUFBQUcsYUFBQVEsR0FFQSxXQUNBWCxFQUFBTSxPQUFBLElBR0FOLEVBQUFJLGVBQUFILEVBQUFJLHdCQ25CQVIsUUFBQUMsT0FBQSxtQkFBQWMsUUFBQSxzQkFBQSxtQkFBQSxLQUFBLFNBQUFDLEVBQUFDLEdBQ0FDLEtBQUFOLGVBQUEsU0FBQU8sR0FLQSxJQUpBLEdBQUFiLE1BQ0FjLEVBQUEsRUFFQUMsR0FEQXJCLFFBQUFzQixLQUFBSCxHQUNBRixFQUFBTSxTQUNBSixFQUFBLEdBQUFDLEVBQUFKLEVBQUFRLFFBQUEsQ0FDQSxHQUFBQyxHQUFBVCxFQUFBSSxHQUNBTSxFQUFBQyxTQUFBUixFQUFBTSxFQUFBcEIsT0FDQSxJQUFBcUIsRUFBQSxHQUFBRCxFQUFBRyxTQUFBLEdBQUFILEVBQUFHLFNBQUFGLEdBQUEsRUFBQSxDQUVBLEdBQUFHLEdBQUE3QixRQUFBc0IsS0FBQUcsRUFDQUksR0FBQUQsU0FBQUYsRUFDQXBCLEVBQUF3QixLQUFBRCxHQUNBVixHQUFBTyxFQUFBRCxFQUFBcEIsV0FDQSxJQUFBcUIsRUFBQSxHQUFBRCxFQUFBRyxTQUFBLEVBQUEsQ0FDQUYsRUFBQUQsRUFBQUcsUUFDQSxJQUFBQyxHQUFBN0IsUUFBQXNCLEtBQUFHLEVBQ0FJLEdBQUFELFNBQUFGLEVBQ0FwQixFQUFBd0IsS0FBQUQsR0FDQVYsR0FBQU8sRUFBQUQsRUFBQXBCLE9BRUFlLElBVUEsTUFQQUQsR0FBQSxFQUNBRSxFQUFBVSxVQUVBYixLQUFBYyxnQkFBQTFCLEdBRUFlLEVBQUFZLFFBQUEzQixJQUVBZSxFQUFBYSxTQUdBaEIsS0FBQWlCLFdBQUEsU0FBQTlCLEdBQ0EsSUFBQSxHQUFBK0IsR0FBQSxFQUFBQSxFQUFBcEIsRUFBQVEsT0FBQVksSUFBQSxDQUNBcEIsRUFBQW9CLEdBQ0EvQixRQUFBQSxHQUNBVyxFQUFBb0IsR0FBQVIsYUFLQVYsS0FBQWMsZ0JBQUEsU0FBQUssR0FDQSxJQUFBLEdBQUFDLEdBQUEsRUFBQUEsRUFBQUQsRUFBQWIsT0FBQWMsSUFDQSxJQUFBLEdBQUFGLEdBQUEsRUFBQUEsRUFBQXBCLEVBQUFRLE9BQUFZLElBQ0FwQixFQUFBb0IsR0FBQS9CLFFBQUFnQyxFQUFBQyxHQUFBakMsU0FDQVcsRUFBQW9CLEdBQUFSLFNBQUFaLEVBQUFvQixHQUFBUixTQUFBUyxFQUFBQyxHQUFBVixXQU1BVixLQUFBVixrQkFBQSxXQUNBLE1BQUFRLE9DdkRBaEIsUUFBQUMsT0FBQSxtQkFBQXNDLFFBQUEsb0JBQUEsV0FnQ0EsUUE3QkFDLEtBQUEsWUFDQW5DLE9BQUEsSUFDQXVCLFNBQUEsS0FFQVksS0FBQSxjQUNBbkMsT0FBQSxHQUNBdUIsU0FBQSxLQUVBWSxLQUFBLGVBQ0FuQyxPQUFBLEdBQ0F1QixTQUFBLElBRUFZLEtBQUEsWUFDQW5DLE9BQUEsR0FDQXVCLFNBQUEsS0FFQVksS0FBQSxhQUNBbkMsT0FBQSxFQUNBdUIsU0FBQSxNQUVBWSxLQUFBLFlBQ0FuQyxPQUFBLEVBQ0F1QixTQUFBLEtBRUFZLEtBQUEsWUFDQW5DLE9BQUEsRUFDQXVCLFNBQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoXCJWZW5kZXJNYWNoaW5BcHBcIiwgW10pOyIsImFuZ3VsYXIubW9kdWxlKFwiVmVuZGVyTWFjaGluQXBwXCIpLmNvbnRyb2xsZXIoXCJNYWNoaW5Db250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIkNhbGN1bGF0aW9uU2VydmljZVwiLCBmdW5jdGlvbiAoJHNjb3BlLCBDYWxjdWxhdGlvblNlcnZpY2UpIHtcblxuICAgICRzY29wZS5hbW91bnQgPSAwO1xuICAgICRzY29wZS52ZW5kZXJDaGFuZ2UgPSBbXTtcbiAgICAkc2NvcGUuSW52ZW50b3J5U3RvY2sgPSBDYWxjdWxhdGlvblNlcnZpY2UuZ2V0SW52ZW50b3J5U3RvY2soKTtcbiAgICAkc2NvcGUuZXJyb3IgPSBmYWxzZTtcbiAgICAkc2NvcGUuZXJyb3JNc2cgPSBcIlwiO1xuICAgICRzY29wZS5jYWxjdWxhdGVWZW5kZXJDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJHNjb3BlLnZlbmRlckNoYW5nZSA9IFtdO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IENhbGN1bGF0aW9uU2VydmljZS5jYWxjdWxhdGVDb2lucygkc2NvcGUuYW1vdW50KTtcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS52ZW5kZXJDaGFuZ2UgPSBkYXRhO1xuXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvciA9IHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5JbnZlbnRvcnlTdG9jayA9IENhbGN1bGF0aW9uU2VydmljZS5nZXRJbnZlbnRvcnlTdG9jaygpO1xuICAgIH07XG5cbn1dKTsiLCJhbmd1bGFyLm1vZHVsZShcIlZlbmRlck1hY2hpbkFwcFwiKS5zZXJ2aWNlKFwiQ2FsY3VsYXRpb25TZXJ2aWNlXCIsIFtcIkludmVudG9yeUZhY3RvcnlcIiwgXCIkcVwiLCBmdW5jdGlvbiAoSW52ZW50b3J5RmFjdG9yeSwgJHEpIHtcbiAgICB0aGlzLmNhbGN1bGF0ZUNvaW5zID0gZnVuY3Rpb24gKHRvdGFsQW1vdW50KSB7XG4gICAgICAgIHZhciB2ZW5kZXJDaGFuZ2UgPSBbXTtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIHRlbXBUb3RhbCA9IGFuZ3VsYXIuY29weSh0b3RhbEFtb3VudCk7XG4gICAgICAgIHZhciBkZWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIHdoaWxlICh0b3RhbEFtb3VudCA8IDAgfHwgaW5kZXggPCBJbnZlbnRvcnlGYWN0b3J5Lmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IEludmVudG9yeUZhY3RvcnlbaW5kZXhdO1xuICAgICAgICAgICAgdmFyIHF0eSA9IHBhcnNlSW50KHRvdGFsQW1vdW50IC8gb3B0aW9uLmFtb3VudCk7XG4gICAgICAgICAgICBpZiAocXR5ID4gMCAmJiBvcHRpb24ucXVhbnRpdHkgPiAwICYmIChvcHRpb24ucXVhbnRpdHkgLSBxdHkpID49IDApIHtcblxuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gYW5ndWxhci5jb3B5KG9wdGlvbik7XG4gICAgICAgICAgICAgICAgdGVtcC5xdWFudGl0eSA9IHF0eTtcbiAgICAgICAgICAgICAgICB2ZW5kZXJDaGFuZ2UucHVzaCh0ZW1wKTtcbiAgICAgICAgICAgICAgICB0b3RhbEFtb3VudCA9IHRvdGFsQW1vdW50IC0gKHF0eSAqIG9wdGlvbi5hbW91bnQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChxdHkgPiAwICYmIG9wdGlvbi5xdWFudGl0eSA+IDApIHtcbiAgICAgICAgICAgICAgICBxdHkgPSBvcHRpb24ucXVhbnRpdHk7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBhbmd1bGFyLmNvcHkob3B0aW9uKTtcbiAgICAgICAgICAgICAgICB0ZW1wLnF1YW50aXR5ID0gcXR5O1xuICAgICAgICAgICAgICAgIHZlbmRlckNoYW5nZS5wdXNoKHRlbXApO1xuICAgICAgICAgICAgICAgIHRvdGFsQW1vdW50ID0gdG90YWxBbW91bnQgLSAocXR5ICogb3B0aW9uLmFtb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvdGFsQW1vdW50ID4gMCkge1xuICAgICAgICAgICAgZGVmZmVyZWQucmVqZWN0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlZHVjZUZyb21TdG9jayh2ZW5kZXJDaGFuZ2UpO1xuICAgICAgICAgICAgLy90aGlzLmFkZFRvU3RvY2sodGVtcFRvdGFsKTtcbiAgICAgICAgICAgIGRlZmZlcmVkLnJlc29sdmUodmVuZGVyQ2hhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRUb1N0b2NrID0gZnVuY3Rpb24gKGFtb3VudCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEludmVudG9yeUZhY3RvcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBJbnZlbnRvcnlGYWN0b3J5W2ldO1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5hbW91bnQgPT0gYW1vdW50KSB7XG4gICAgICAgICAgICAgICAgSW52ZW50b3J5RmFjdG9yeVtpXS5xdWFudGl0eSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVkdWNlRnJvbVN0b2NrID0gZnVuY3Rpb24gKHZlbmRvckNoYW5nZSkge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHZlbmRvckNoYW5nZS5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBJbnZlbnRvcnlGYWN0b3J5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKEludmVudG9yeUZhY3RvcnlbaV0uYW1vdW50ID09IHZlbmRvckNoYW5nZVt4XS5hbW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgSW52ZW50b3J5RmFjdG9yeVtpXS5xdWFudGl0eT1JbnZlbnRvcnlGYWN0b3J5W2ldLnF1YW50aXR5LXZlbmRvckNoYW5nZVt4XS5xdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXRJbnZlbnRvcnlTdG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEludmVudG9yeUZhY3Rvcnk7XG4gICAgfTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZShcIlZlbmRlck1hY2hpbkFwcFwiKS5mYWN0b3J5KFwiSW52ZW50b3J5RmFjdG9yeVwiLCBbZnVuY3Rpb24gKCkge1xuICAgIHZhciB2ZW5kZXJTdG9yYWdlID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcIk9uZSBwb3VuZFwiLFxuICAgICAgICAgICAgYW1vdW50OiAxMDAsXG4gICAgICAgICAgICBxdWFudGl0eTogMTEsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IFwiRmlmdHkgcGVuY2VcIixcbiAgICAgICAgICAgIGFtb3VudDogNTAsXG4gICAgICAgICAgICBxdWFudGl0eTogMjQsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IFwiVHdlbnR5IHBlbmNlXCIsXG4gICAgICAgICAgICBhbW91bnQ6IDIwLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDAsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IFwiVGVuIHBlbmNlXCIsXG4gICAgICAgICAgICBhbW91bnQ6IDEwLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDk5LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiBcIkZpdmUgcGVuY2VcIixcbiAgICAgICAgICAgIGFtb3VudDogNSxcbiAgICAgICAgICAgIHF1YW50aXR5OiAyMDAsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IFwiVHdvIHBlbmNlXCIsXG4gICAgICAgICAgICBhbW91bnQ6IDIsXG4gICAgICAgICAgICBxdWFudGl0eTogMTEsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IFwiT25lIHBlbm55XCIsXG4gICAgICAgICAgICBhbW91bnQ6IDEsXG4gICAgICAgICAgICBxdWFudGl0eTogMjMsXG4gICAgICAgIH1cbiAgICBdO1xuICAgIHJldHVybiB2ZW5kZXJTdG9yYWdlO1xuXG59XSk7Il19
